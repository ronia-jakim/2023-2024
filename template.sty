\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{template}

\RequirePackage{sectsty}

\RequirePackage[T1]{fontenc}
\RequirePackage[utf8]{inputenc}

\RequirePackage[fontsize=12pt]{fontsize}

\RequirePackage{geometry}
\geometry {
    a4paper,
    total={170mm, 257mm}
}

\RequirePackage[default]{sourcesanspro} % czcionka
\RequirePackage{mathastext}

\RequirePackage{microtype}

\RequirePackage{amssymb}
\RequirePackage{amsmath}
\RequirePackage{mathtools}
\RequirePackage{dsfont}
\RequirePackage{ wasysym }

\RequirePackage{tikz}

\RequirePackage{enumitem}

\RequirePackage{graphicx}
\graphicspath{ {./} }

\RequirePackage{eso-pic}

\RequirePackage[hidelinks]{hyperref}

\pagestyle{empty}

\RequirePackage{phaistos}

\renewcommand\labelitemi{\scalebox{0.9}{\color{green}\PHtunny}}

\setlength{\parindent}{0pt}
\RequirePackage[skip=7pt]{parskip}

\RequirePackage{xparse}


%%================================================================%%

%% RZECZY PRZYDATNE

%%================================================================%%

\RequirePackage{ stmaryrd }

\DeclareMathOperator{\img}{im}

\DeclareMathOperator{\Z}{\mathbb{Z}}
\DeclareMathOperator{\R}{\mathbb{R}}
\DeclareMathOperator{\C}{\mathbb{C}}
\DeclareMathOperator{\N}{\mathbb{N}}


\renewcommand{\implies}{\Rightarrow}
\renewcommand{\impliedby}{\Leftarrow}

\newcommand{\set}[1]{\mathcal{#1}}

\DeclareDocumentCommand\prob{g g}{\mathbb{P}
    \IfNoValueTF {#2}
      {\IfNoValueF {#1} {\left[#1\right]}}
      {\left[#1\;|\;#2\right]}
}


\DeclareDocumentCommand\expected{g g}{\mathbb{E}
    \IfNoValueTF {#2}
      {\IfNoValueF {#1} {\left[#1\right]}}
      {\left[#1\;|\;#2\right]}
}

\renewcommand{\@seccntformat}[1]{%
  \ifcsname format#1\endcsname
    \csname format#1\endcsname
  \else
    \csname the#1\endcsname\quad % default
  \fi
}
\let\latexl@section\l@section
\def\l@section#1#2{\begingroup\let\numberline\@gobble\latexl@section{#1}{#2}\endgroup}

\NewDocumentCommand{\datesec}{o m m}{%
    \renewcommand\thesection{#2}
    \IfNoValueTF{#1}
        {\section{#3}}
        {\section[#1]{#3}}
}


%%================================================================%%

%% KOLORKI

%%================================================================%%

\RequirePackage{xcolor}

\definecolor{red}{HTML}{CB7876}
\definecolor{green}{HTML}{8BA47C}
\definecolor{yellow}{HTML}{E6B12C}
\definecolor{orange}{HTML}{CF7438}
\definecolor{blue}{HTML}{32769B}
\definecolor{purple}{HTML}{8C7DA8}%{64557B}


\allsectionsfont{\color{purple}}

\newcommand{\buff}[1]{\textbf{\color{orange}#1}}
\newcommand{\acc}[1]{{\color{blue}\slshape #1}}


%%================================================================%%

%% TWIERDZENIA ETC.

%%================================================================%%

\RequirePackage{amsthm}
\RequirePackage{thmtools}
\RequirePackage{tcolorbox}

\RequirePackage[framemethod=TikZ]{mdframed}

\tcbuselibrary{theorems}

\renewenvironment{proof}{{\bfseries\color{orange} Dowód}$ $\newline}{
  \begin{flushright}\includegraphics[width=30pt]{~/uni-stuff/2023-2024/piwo.png}\end{flushright}$ $\newline
}



\declaretheoremstyle[
    headfont=\bfseries\sffamily\large\color{orange!80!red},
    bodyfont=\normalfont,
    notebraces={: }{},
    notefont=\color{orange},
    headformat=\NAME$\;$\NUMBER\NOTE,
    postheadspace=\newline,
    mdframed={
        linewidth=2pt,
        rightline=false, topline=false, bottomline=false,
        linecolor=red!50!orange, backgroundcolor=yellow!7,
    }
]{twierdzonka}

\declaretheorem[
  name=Twierdzenie,
  numberwithin=section,
  style=twierdzonka,
]{theorem}


\declaretheoremstyle[
    headfont=\bfseries\sffamily\large\color{purple!80!blue},
    bodyfont=\normalfont,
    notebraces={: }{},
    notefont=\color{purple},
    headformat=\NAME$\;$\NUMBER\NOTE,
    postheadspace=\newline,
    mdframed={
        linewidth=2pt,
        rightline=false, topline=false, bottomline=false,
        linecolor=purple, backgroundcolor=purple!6!pink!3,
    }
]{uwagi-lematy}

\declaretheorem[
  name=Uwaga,
  numberlike=theorem,
  style=uwagi-lematy,
]{uwaga}

\declaretheorem[
  name=Lemat,
  numberlike=theorem,
  style=uwagi-lematy,
]{lemma}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\large\color{green!80!black},
    bodyfont=\normalfont,
    notebraces={: }{},
    notefont=\color{green},
    headformat=\NAME$\;$\NUMBER\NOTE,
    postheadspace=\newline,
    mdframed={
        linewidth=2pt,
        rightline=false, topline=false, bottomline=false,
        linecolor=green, backgroundcolor=yellow!5,
    }
]{defbox}


\declaretheorem[
  name=Definicja,
  numberwithin=section,
  style=defbox
]{definition}

\newtheoremstyle{przykladziki}
  {3pt}
  {3pt}
  {}
  {}
  {\color{green}\large\bfseries}
  {\newline}
  {.5em}
  {\thmname{#1}\thmnumber{ #2}\thmnote{ : \textbf{#3}}}

\declaretheorem[
  name=Przykład(y),
  numberwithin=section,
  style=przykladziki
]{ex}

\newenvironment{example}[1][ ]{
    \begin{ex}[#1]{$ $\vspace{-25pt}\\}
    \begin{enumerate}
}{
    \end{enumerate}
    \end{ex}
}


\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{blue!80!black},
    bodyfont=\normalfont,
    notebraces={: }{},
    notefont=\color{blue},
    headformat=\NAME\NUMBER\NOTE,
    postheadspace=\newline,
    mdframed={
        linewidth=2pt,
        rightline=false, topline=false, bottomline=false,
        linecolor=blue!60!purple!50, backgroundcolor=blue!2,
    }
]{dygresyja}

\declaretheorem[
  name=Dygresja,
  numbered=no,
  style=dygresyja,
]{dygresja}

\newtheoremstyle{zadanka}
  {3pt}
  {3pt}
  {\itshape}
  {}
  {\color{red}\large\bfseries}
  {\newline}
  {.5em}
  {\thmname{#1}\thmnumber{ #2}\thmnote{ : \textbf{#3}}}

\declaretheorem[
  name=Problem,
  numberwithin=section,
  style=zadanka,
]{problem}

\newtheoremstyle{rozw_moj}
  {3pt}
  {3pt}
  {}
  {}
  {\color{red}\bfseries}
  {\newline}
  {.5em}
  {\thmname{#1}\thmnumber{ #2}\thmnote{ : \textbf{#3}}}

\declaretheorem[
  name=Rozwiązanko,
  numbered=no,
  style=rozw_moj,
  shaded={bgcolor=black!10, rulecolor=red!30!black!20, rulewidth=1pt, textwidth=\textwidth}
]{solution}

%%================================================================%%

%% OBRAZKI && DIAGRAMY

%%================================================================%%

\usetikzlibrary{cd, patterns, patterns.meta}

%%================================================================%%

%% TŁO STRON

%%================================================================%%

\DeclareOption{back_on} {
  \AddToShipoutPictureBG{%
  \begin{tikzpicture}[remember picture, overlay]

    \node[inner sep=0pt] at (current page.center) {\includegraphics{~/uni-stuff/2023-2024/fajne_tlo.png}};

  \end{tikzpicture}%
  }
}
\DeclareOption{flowers} {
  \AddToShipoutPictureBG{%
  \begin{tikzpicture}[remember picture, overlay]

    \node[inner sep=0pt, opacity=0.2] at (current page.center) {\includegraphics{~/uni-stuff/2023-2024/obrazki/pattern-ramka.png}};

  \end{tikzpicture}%
  }
}
\ProcessOptions\relax

\endinput
